<html>
<head>
    <title>CLAP: .NET Command-Line Auto-Parser</title>
    <link rel="stylesheet" type="text/css" href="style.css"/>
    <link rel="stylesheet" type="text/css" href="syntaxhighlighter/shCore.css"/>
    <link rel="stylesheet" type="text/css" href="syntaxhighlighter/shThemeDefault.css"/>
    <link rel="stylesheet" type="text/css" href="grumble/grumble.min.css"/>
    <script type="text/javascript" src="jquery-1.6.2.min.js"></script>
    <script type="text/javascript" src="syntaxhighlighter/shCore.js"></script>
    <script type="text/javascript" src="syntaxhighlighter/shBrushCSharp.js"></script>
    <script type="text/javascript" src="grumble/jquery.grumble.min.js"></script>
    <script type="text/javascript" src="script.js"></script>
</head>
<body>
    <div id="container">
        <div id="header">CLAP: .NET Command-Line Auto-Parser</div>
        <div id="center">
            <div id="left">
                <a href="#what" class="menu_item selected">WTF?</a>
                <a href="#using" class="menu_item">USING CLAP</a>
                <a href="#attributes" class="menu_item">ATTRIBUTES</a>
                <div class="sub_menu" menu_id="#attributes">
                    <a href="#attribute_verb" class="sub_menu_item">Verb</a>
                    <a href="#attribute_parameter" class="sub_menu_item">Parameter</a>
                    <a href="#attribute_empty" class="sub_menu_item">Empty</a>
                    <a href="#attribute_error" class="sub_menu_item">Error</a>
                    <a href="#attribute_help" class="sub_menu_item">Help</a>
                    <a href="#attribute_global" class="sub_menu_item">Global</a>
                </div>
                <a href="#validation" class="menu_item">VALIDATION</a><span class="grumble" text="Lots of features here" angle="60" distance="90" showAfter="18000" hideAfter="3000"></span>
                <div class="sub_menu" menu_id="#validation">
                    <a href="#validation_lessthan" class="sub_menu_item">LessThan</a>
                    <a href="#validation_lessorequalto" class="sub_menu_item">LessOrEqualTo</a>
                    <a href="#validation_morethan" class="sub_menu_item">MoreThan</a>
                    <a href="#validation_moreorequalto" class="sub_menu_item">MoreOrEqualTo</a>
                    <a href="#validation_regexmatches" class="sub_menu_item">RegexMatches</a>
                    <a href="#validation_fileexists" class="sub_menu_item">FileExists</a>
                    <a href="#validation_directoryexists" class="sub_menu_item">DirectoryExists</a>
                    <a href="#validation_pathexists" class="sub_menu_item">PathExists</a>
                </div>
                <a href="#custom_validation" class="menu_item">CUSTOM VALIDATION</a>
                <a href="#expressions" class="menu_item">EXPRESSIONS</a>
                <div class="sub_menu" menu_id="#expressions">
                    <a href="#expressions_empty" class="sub_menu_item">Empty Handlers</a>
                    <a href="#expressions_help" class="sub_menu_item">Help Handlers</a>
                    <a href="#expressions_emptyhelp" class="sub_menu_item">Empty Help Handlers</a>
                    <a href="#expressions_error" class="sub_menu_item">Error Handlers</a>
                    <a href="#expressions_global" class="sub_menu_item">Global Handlers</a>
                </div>
                <a href="#examples" class="menu_item">EXAMPLES</a>
                <a href="#download" class="menu_item">DOWNLOAD</a>
                <a href="#license" class="menu_item">LICENSE</a>
                <a href="#about" class="menu_item">ABOUT</a>
            </div>
            <div id="right">
                <div id="what" class="content">
                    <div id="intro_code">
                        <pre class="codeblock">
    <span class="code_keyword"><span class="grumble" text="take an existing class" angle="-70" distance="-5" showAfter="1000" hideAfter="6500"></span>class</span> <span class="code_type">ClapApp</span>
    {
        <span class="seq" timeout="8000">[<span class="code_type">Verb</span>]</span><span class="grumble" text="add this thingy" angle="50" distance="0" showAfter="8000" hideAfter="4000"></span>
        <span class="code_keyword">public static void</span> <span class="grumble" text="with some methods" angle="-10" distance="0" showAfter="2500" hideAfter="5000"></span>Foo(<span class="code_keyword">string</span> bar,<span class="grumble" text="and some parameters" angle="45" distance="0" showAfter="3500" hideAfter="4000"></span> <span class="code_keyword">int</span> count)
        {
            <span class="code_keyword">for</span> (<span class="code_keyword">int</span> i = 0; i < count; i++)
            {
                <span class="code_type">Console</span>.WriteLine(<span class="code_string">"This parser kicks {0}"</span>, bar);
            }
        }
    }

    <span class="seq" timeout="9000"><span class="code_keyword">class</span> <span class="code_type">Program</span>
    {
        <span class="code_keyword">static void</span> Main(<span class="code_keyword">string</span>[] args)
        {
            <span class="seq" timeout="10000"><span class="code_type">Parser</span>.Run&lt;<span class="code_type">ClapApp</span>>(args);</span><span class="grumble" text="and also this line" angle="60" distance="-5" showAfter="10000" hideAfter="3000"></span>
        }
    }</span>
                        </pre>
                    </div>
                    <pre class="console seq" timeout="13000">
C:\> <span class="commandline">myexe foo -bar:Ass! -count:10</span><span class="grumble" text="OMFG! Magic!" angle="30" distance="5" showAfter="14000" hideAfter="3000"></span>
<span class="seq" timeout="16000">This parser kicks Ass!</span>
<span class="seq" timeout="16100">This parser kicks Ass!</span>
<span class="seq" timeout="16200">This parser kicks Ass!</span>
<span class="seq" timeout="16300">This parser kicks Ass!</span>
<span class="seq" timeout="16400">This parser kicks Ass!</span>
<span class="seq" timeout="16500">This parser kicks Ass!</span>
<span class="seq" timeout="16600">This parser kicks Ass!</span>
<span class="seq" timeout="16700">This parser kicks Ass!</span>
<span class="seq" timeout="16800">This parser kicks Ass!</span>
<span class="seq" timeout="16900">This parser kicks Ass!</span></span></pre>
                </div>
                <div id="using" class="content">
                    <h3>Using CLAP</h3>
                    <ol>
                        <li>Download the CLAP dll</li>
                        <li>Add a reference to the dll from your Console or Windows application</li>
                        <li>Add a <span class="code">using</span> statement: <span class="code highlight">using CLAP;</span></li>
                        <li>Implement a verbs class (see the Attributes section)</li>
                        <li>
                            From your <span class="code">void Main</span> method, add a call to CLAP's parser using your class:<br/>
                            <pre class="brush: csharp, highlight: 3">
                                static void Main(string[] args)
                                {
                                    Parser.Run&lt;TheApp>(args);
                                }
                            </pre>
                        </li>
                    </ol>
                    <h3>Static vs. Instance</h3>
                    <p>
                        If all the verbs of a class are static, using the above example is enough.
                        However, if the verbs are not static, calling the parser requires an instance of the class.
                    </p>
                    <p>The following example shows how to the parser with a instance of the class:</p>
                    <pre class="brush: csharp, highlight: 5">
                        static void Main(string[] args)
                        {
                            var theApp = new TheApp();

                            Parser.Run(args, theApp);
                        }
                    </pre>
                    <h3>Installing CLAP using NuGet</h3>
                    <p>If you have NuGet installed, steps 1-2 can be skipped.</p>
                    <p>Either find CLAP from the NuGet manager, or run the following command from NuGet's console:</p>
                    <p class="console"><b>PM></b> Install-Package clap</p>
                </div>
                <div id="attributes" class="content">
                    <h3>Attributes</h3>
                    <p>Using CLAP with attributes is the easiest way to create your app's functionality.</p>
                    <p>CLAP's attributes allow you to define various verbs, parameters, global parameters, even error-handling and more.</p>
                    <p>There's no reason for your <span class="code highlight">void Main()</span> method to be more than a single line of code.</p>
                    <div class="attribute" id="attribute_verb">
                        <div class="attribute_name code">Verb</div>
                        <div class="attribute_description">
                            <p>Marks a method as an available verb.</p>
                        </div>
                        <div class="attribute_properties">
                            <h3>Properties:</h3>
                            <div class="attribute_property">
                                <div class="attribute_property_name code">IsDefault (Boolean)</div>
                                <div class="attribute_property_description">
                                    <p>
                                        <p>Whether this verb is the class's default.</p>
                                        <p>A default verb is called when no verb argument was entered.</p>
                                        <p>
                                            Only a single verb can be set as default. Having more than one default verb
                                            will throw a <span class="code">MoreThanOneDefaultVerbException</span>.
                                        </p>
                                    </p>
                                </div>
                            </div>
                            <div class="attribute_property">
                                <div class="attribute_property_name code">Aliases (String)</div>
                                <div class="attribute_property_description">Additional aliases for the verb.</div>
                            </div>
                            <div class="attribute_property">
                                <div class="attribute_property_name code">Description (String)</div>
                                <div class="attribute_property_description">Used to describe the verb when displaying help.</div>
                            </div>
                        </div>
                        <div class="attribute_samples">
                            <h3>Example:</h3>
                            <pre class="brush: csharp, highlight: 3">
                                class Program
                                {
                                    [Verb(IsDefault = true)]
                                    public static void Foo()
                                    {
                                    }
                                }
                            </pre>
                        </div>
                    </div>
                    <div class="attribute" id="attribute_parameter">
                        <div class="attribute_name code">Parameter</div>
                        <div class="attribute_description">
                            <p>Adds additional properties to verb's parameters.</p>
                            <p>Using the Parameter attribute is only required if any of the properties is needed, otherwise, it is optional.</p>
                            <h3>Supported types:</h3>
                            <ul>
                                <li>String</li>
                                <li>Numeric (int, float etc)</li>
                                <li>Boolean (can also used as switches: <span class="code highlight">-p:true</span> is the same as <span class="code highlight">-p</span>)</li>
                                <li>Enums</li>
                                <li>Guid</li>
                                <li>Uri</li>
                                <li>Arrays of all the above (as CSV)</li>
                            </ul>
                        </div>
                        <div class="attribute_properties">
                            <h3>Properties:</h3>
                            <div class="attribute_property">
                                <div class="attribute_property_name code">Default (Object)</div>
                                <div class="attribute_property_description">The default value of the parameter, in-case no input was provided</div>
                            </div>
                            <div class="attribute_property">
                                <div class="attribute_property_name code">Required (Boolean)</div>
                                <div class="attribute_property_description">Whether the parameter is required</div>
                            </div>
                            <div class="attribute_property">
                                <div class="attribute_property_name code">Aliases (String)</div>
                                <div class="attribute_property_description">Additional aliases for the parameter</div>
                            </div>
                            <div class="attribute_property">
                                <div class="attribute_property_name code">Description (String)</div>
                                <div class="attribute_property_description">Used to describe the verb when displaying help</div>
                            </div>
                        </div>
                        <div class="attribute_samples">
                            <h3>Example:</h3>
                            <pre class="brush: csharp, highlight: [5,6]">
                                class Program
                                {
                                    [Verb]
                                    public static void Foo(
                                        [Parameter(Required = true)] string name,
                                        [Parameter(Default = 5)] int count,
                                        bool upperCase)
                                    {
                                    }
                                }
                            </pre>
                        </div>
                    </div>
                    <div class="attribute" id="attribute_empty">
                        <div class="attribute_name code">Empty</div>
                        <div class="attribute_description">
                            <p>Marks a method to execute when no input was provided by the user.</p>
                            <p>Only a single method can be marked with <span class="code highlight">[Empty]</span> in a class.</p>
                        </div>
                        <div class="attribute_samples">
                            <h3>Example:</h3>
                            <pre class="brush: csharp, highlight: 8">
                                class Program
                                {
                                    [Verb]
                                    public static void Foo()
                                    {
                                    }

                                    [Empty]
                                    public static void NoInput()
                                    {
                                    }
                                }
                            </pre>
                        </div>
                    </div>
                    <div class="attribute" id="attribute_error">
                        <div class="attribute_name code">Error</div>
                        <div class="attribute_description">
                            <p>Marks a method to execute when an error occurs.</p>
                            <p>Only a single method can be marked with <span class="code highlight">[Error]</span> and it must match one of the following signatures:</p>
                            <div class="code highlight" style="margin-bottom:2px">void Error() {}</div>
                            <div class="code highlight">void Error(Exception ex) {}</div>
                            <h4>Notice that there is no restriction for the name of the method, only the signature.</h4>
                        </div>
                        <div class="attribute_properties">
                            <h3>Properties:</h3>
                            <div class="attribute_property">
                                <div class="attribute_property_name code">ReThrow (Boolean)</div>
                                <div class="attribute_property_description">Whether to rethrow the execption after handling it</div>
                            </div>
                        </div>
                        <div class="attribute_samples">
                            <h3>Example:</h3>
                            <pre class="brush: csharp, highlight: 8">
                                class Program
                                {
                                    [Verb]
                                    public static void Foo()
                                    {
                                    }

                                    [Error]
                                    public static void HandleError(Exception ex)
                                    {
                                    }
                                }
                            </pre>
                        </div>
                    </div>
                    <div class="attribute" id="attribute_help">
                        <div class="attribute_name code">Help</div>
                        <div class="attribute_description">
                            <p>Marks a method to execute when the user requests for help.</p>
                            <p>The method must match the following signature:</p>
                            <div class="code highlight">void Help(string help) {}</div>
                        </div>
                        <div class="attribute_properties">
                            <h3>Properties:</h3>
                            <div class="attribute_property">
                                <div class="attribute_property_name code">Name (String)</div>
                                <div class="attribute_property_description">The parameter name for the help. If none specified - the method name is used instead.</div>
                            </div>
                            <div class="attribute_property">
                                <div class="attribute_property_name code">Aliases (String)</div>
                                <div class="attribute_property_description">Additional aliases for the parameter name</div>
                            </div>
                        </div>
                        <div class="attribute_samples">
                            <h3>Example:</h3>
                            <pre class="brush: csharp, highlight: 8">
                                class Program
                                {
                                    [Verb]
                                    public static void Foo()
                                    {
                                    }

                                    [Help]
                                    public static void ShowHelp(string help)
                                    {
                                    }
                                }
                            </pre>
                        </div>
                    </div>
                    <div class="attribute" id="attribute_global">
                        <div class="attribute_name code">Global</div>
                        <div class="attribute_description">
                            <p>Marks a method as a global parameter. A global parameter is available for all verbs within a class.
                            <p>The global attribute can be applied only to methods that accept no more than a single supported parameter.
                            If a method has no parameters - it is treated as a boolean switch.</p>
                            <p>All globals are called before the executing verb.</p>
                        </div>
                        <div class="attribute_properties">
                            <h3>Properties:</h3>
                            <div class="attribute_property">
                                <div class="attribute_property_name code">Name (String)</div>
                                <div class="attribute_property_description">The parameter name. If none specified - the method name is used instead.</div>
                            </div>
                            <div class="attribute_property">
                                <div class="attribute_property_name code">Aliases (String)</div>
                                <div class="attribute_property_description">Additional aliases for the parameter name</div>
                            </div>
                            <div class="attribute_property">
                                <div class="attribute_property_name code">Description (String)</div>
                                <div class="attribute_property_description">Used to describe the parameter when displaying help</div>
                            </div>
                        </div>
                        <div class="attribute_samples">
                            <h3>Example:</h3>
                            <pre class="brush: csharp, highlight: [8,13]">
                                class Program
                                {
                                    [Verb]
                                    public static void Foo()
                                    {
                                    }

                                    [Global]
                                    public static void Log(string message)
                                    {
                                    }

                                    [Global(Aliases="d")]
                                    public static void Debug()
                                    {
                                        Debugger.Launch();
                                    }
                                }
                            </pre>
                        </div>
                    </div>
                </div>
                <div id="validation" class="content">
                    <h3>Validation</h3>
                    <p>Validation attributes validate the input before executing the verb.</p>
                    <p>CLAP comes with some built-in validation attributes and custom validation can be easily implemented.</p>
                    <div class="attribute" id="validation_lessthan">
                        <div class="attribute_name code">LessThan(double number)</div>
                        <div class="attribute_description">
                            <p>Validates that a numeric value is less than a specified value.</p>
                        </div>
                        <div class="attribute_samples">
                            <h3>Example:</h3>
                            <pre class="brush: csharp, highlight: 4">
                                class Program
                                {
                                    [Verb]
                                    public static void Foo([LessThan(10)] int count)
                                    {
                                    }
                                }
                            </pre>
                        </div>
                    </div>
                    <div class="attribute" id="validation_lessorequalto">
                        <div class="attribute_name code">LessOrEqualTo(double number)</div>
                        <div class="attribute_description">
                            <p>Validates that a numeric value is less or equals a specified value.</p>
                        </div>
                        <div class="attribute_samples">
                            <h3>Example:</h3>
                            <pre class="brush: csharp, highlight: 4">
                                class Program
                                {
                                    [Verb]
                                    public static void Foo([LessOrEqualTo(30.5)] double angle)
                                    {
                                    }
                                }
                            </pre>
                        </div>
                    </div>
                    <div class="attribute" id="validation_morethan">
                        <div class="attribute_name code">MoreThan(double number)</div>
                        <div class="attribute_description">
                            <p>Validates that a numeric value is more than a specified value.</p>
                        </div>
                        <div class="attribute_samples">
                            <h3>Example:</h3>
                            <pre class="brush: csharp, highlight: 4">
                                class Program
                                {
                                    [Verb]
                                    public static void Foo([MoreThan(10)] int count)
                                    {
                                    }
                                }
                            </pre>
                        </div>
                    </div>
                    <div class="attribute" id="validation_moreorequalto">
                        <div class="attribute_name code">MoreOrEqualTo(double number)</div>
                        <div class="attribute_description">
                            <p>Validates that a numeric value is more or equals a specified value.</p>
                        </div>
                        <div class="attribute_samples">
                            <h3>Example:</h3>
                            <pre class="brush: csharp, highlight: 4">
                                class Program
                                {
                                    [Verb]
                                    public static void Foo([MoreOrEqualTo(30.5)] double angle)
                                    {
                                    }
                                }
                            </pre>
                        </div>
                    </div>
                    <div class="attribute" id="validation_regexmatches">
                        <div class="attribute_name code">RegexMatches(string pattern)</div>
                        <div class="attribute_description">
                            <p>Validates that a string value matches a specified regular-expression.</p>
                        </div>
                        <div class="attribute_samples">
                            <h3>Example:</h3>
                            <pre class="brush: csharp, highlight: 4">
                                class Program
                                {
                                    [Verb]
                                    public static void Foo([RegexMatches(@"[0-9a-zA-Z]*")] string name)
                                    {
                                    }
                                }
                            </pre>
                        </div>
                    </div>
                    <div class="attribute" id="validation_fileexists">
                        <div class="attribute_name code">FileExists</div>
                        <div class="attribute_description">
                            <p>Validates that a file exists.</p>
                        </div>
                        <div class="attribute_samples">
                            <h3>Example:</h3>
                            <pre class="brush: csharp, highlight: 4">
                                class Program
                                {
                                    [Verb]
                                    public static void Foo([FileExists] string filePath)
                                    {
                                    }
                                }
                            </pre>
                        </div>
                    </div>
                    <div class="attribute" id="validation_directoryexists">
                        <div class="attribute_name code">DirectoryExists</div>
                        <div class="attribute_description">
                            <p>Validates that a directory exists.</p>
                        </div>
                        <div class="attribute_samples">
                            <h3>Example:</h3>
                            <pre class="brush: csharp, highlight: 4">
                                class Program
                                {
                                    [Verb]
                                    public static void Foo([DirectoryExists] string path)
                                    {
                                    }
                                }
                            </pre>
                        </div>
                    </div>
                    <div class="attribute" id="validation_pathexists">
                        <div class="attribute_name code">PathExists</div>
                        <div class="attribute_description">
                            <p>Validates that a file or a directory exists.</p>
                        </div>
                        <div class="attribute_samples">
                            <h3>Example:</h3>
                            <pre class="brush: csharp, highlight: 4">
                                class Program
                                {
                                    [Verb]
                                    public static void Foo([PathExists] string path)
                                    {
                                    }
                                }
                            </pre>
                        </div>
                    </div>
                </div>
                <div id="custom_validation" class="content">
                    <h3>Custom Validation</h3>
                    <p>CLAP comes with a set of built-in validation attributes, however,
                    additional custom validation attributes can be easily implemented and used.</p>
                    <h2>Creating a custom validator</h2>
                    <p>Creating a custom validator requires implementing a validator class that implementes the IParameterValidator interface
                    and a validation attribute class that derives from ValidationAttribute.</p>
                    <h3>1. Implement the IParameterValidator interface</h3>
                    <p>Create a class and implement the following method:</p>
                    <p class="code">void Validate(ParameterInfo parameter, object value);</p>
                    <h3>Example:</h3>
                    <pre class="brush: csharp, highlight: 10">
                        class LengthValidator : IParameterValidator
                        {
                            public int Length { get; private set; }

                            public LengthValidator(int length)
                            {
                                Length = length;
                            }

                            public void Validate(ParameterInfo parameter, object value)
                            {
                                var str = (string)value;

                                if (str.Length < Length)
                                {
                                    throw new ValidationException(
                                        string.Format("Length should be at least {0}", Length));
                                }
                            }
                        }
                    </pre>
                    <p>
                        Notice that the <span class="highlight code">parameter</span> argument is not used in this example.
                        The important part is the actual value being validated. The additional
                        <span class="code">parameter</span> argument is provided in-case validation needs to be against 
                        reflected information about the parameter type, or, if that information is required for creating a
                        validation error message.<br/>
                        Anyway, it is provided and can be ignored.
                    </p>
                    <h3>2. Derive from ValidationAttribute</h3>
                    <p>
                        Create a class that derives from ValidationAttribute and create an 
                        instance of the validator class (from the previous step) in the constructor.
                    </p>
                    <h3>Example:</h3>
                    <pre class="brush: csharp, highlight: [2,7]">
                        [AttributeUsage(AttributeTargets.Parameter)]
                        class LengthAtLeastAttribute : ValidationAttribute
                        {
                            public int Length { get; private set; }

                            public LengthAtLeastAttribute(int length)
                                : base(new LengthValidator(length))
                            {
                                Length = length;
                            }

                            public override string Description
                            {
                                get
                                {
                                    return string.Format("Length is at least {0}", Length);
                                }
                            }
                        }
                    </pre>
                    <p>
                        In this example, the attribute is used to validate that an input string has a length of
                        at least a specified number of characters.
                        For example:
                        <pre class="brush: csharp, highlight: [2,7]">
                            [Verb]
                            public static void Foo([LengthAtLeast(10)] string text)
                            {
                            }
                        </pre>
                        The <span class="code">text</span> argument must be at least 10 characters long, otherwise,
                        an exception will be thrown.
                    </p>
                    <p>
                        The <span class="code">Description</span> property is used when generating the help string.
                    </p>
                </div>
                <div id="expressions" class="content">
                    <h3>Expressions</h3>
                    <p>Creating a verbs class is easy and the result is a beautiful class with clear separation of concerns.</p>
                    <p>
                        Defining error, help and empty handlers, as well as global parameters 
                        can be also implemented using methods on an existing parser.
                        These methods use lambda expressions syntax to define the behavior.
                    </p>
                    <p>
                        If you own all the application's code, there is no real motivation for using the expressions syntax.
                        However, if you don't have the source of the program (you only have the binary)
                        and you can't derive from the program's class (it is sealed) - then adding the extra functionality is possible
                        only using expressions.
                    </p>
                    <h2>Expression Methods</h2>
                    <div class="attribute" id="expressions_empty">
                        <div class="attribute_name code">RegisterEmptyHandler(Action handler)</div>
                        <div class="attribute_description">
                            <p>Registers an action that will be executed when no input was provided by the user.</p>
                            <p>
                                Only a single empty handler can be registered. Trying to register more than one
                                handler will throw a <span class="code">MoreThanOneEmptyHandlerException</span>.
                            </p>
                        </div>
                        <div class="attribute_samples">
                            <h3>Example:</h3>
                            <pre class="brush: csharp, highlight: 5">
                                static void Main(string[] args)
                                {
                                    var p = new Parser&lt;TheApp>();

                                    p.RegisterEmptyHandler(() => Console.WriteLine("No Input"));

                                    p.Run(args);
                                }
                            </pre>
                            <p>This will print "No Input" whenever the exe is executed without any input.</p>
                            <p>Notice that anonymous delegates can be used instead of the lambda expression:</p>
                            <pre class="brush: csharp, highlight: [5,6,7,8]">
                                static void Main(string[] args)
                                {
                                    var p = new Parser&lt;TheApp>();

                                    p.RegisterEmptyHandler(delegate
                                    {
                                        Console.WriteLine("No Input");
                                    });

                                    p.Run(args);
                                }
                            </pre>
                            <p>This is more usefull when more than a single statement is to be executed.</p>
                        </div>
                    </div>
                    <div class="attribute" id="expressions_help">
                        <div class="attribute_name code">RegisterHelpHandler(string names, Action&lt;string> helpHandler)</div>
                        <div class="attribute_description">
                            <p>Registers an action that will be executed when help is requested by the user.</p>
                        </div>
                        <div class="attribute_samples">
                            <h3>Example:</h3>
                            <pre class="brush: csharp, highlight: 5">
                                static void Main(string[] args)
                                {
                                    var p = new Parser&lt;TheApp>();

                                    p.RegisterHelpHandler("?,h,help", help => Console.WriteLine(help));

                                    p.Run(args);
                                }
                            </pre>
                            <p>
                                This will print the help string when either <span class="code highlight">-?</span>,
                                <span class="code highlight">-h</span> or <span class="code highlight">-help</span> are provided.
                            </p>
                            <p>The help string is automatically generated.</p>
                        </div>
                    </div>
                    <div class="attribute" id="expressions_emptyhelp">
                        <div class="attribute_name code">RegisterEmptyHelpHandler(Action&lt;string> handler)</div>
                        <div class="attribute_description">
                            <p>Print the help string when no input is provided by the user.</p>
                            <p>
                                Only a single empty help handler can be registered. Trying to register more than one
                                handler will throw a <span class="code">MoreThanOneEmptyHandlerException</span>.
                            </p>
                        </div>
                        <div class="attribute_samples">
                            <h3>Example:</h3>
                            <pre class="brush: csharp, highlight: 5">
                                static void Main(string[] args)
                                {
                                    var p = new Parser&lt;TheApp>();

                                    p.RegisterEmptyHelpHandler(help => Console.WriteLine(help));

                                    p.Run(args);
                                }
                            </pre>
                            <p>This will print the help string when the program is executed without any arguments.</p>
                        </div>
                    </div>
                    <div class="attribute" id="expressions_error">
                        <div class="attribute_name code">RegisterErrorHandler(Action&lt;Exception> handler, [bool rethrow = false])</div>
                        <div class="attribute_description">
                            <p>Registers an action that will be executed when an error occurs.</p>
                            <p>if <span class="code">rethrow</span> is true - the exception will be rethrown by the parser, keeping the original stack trace.</p>
                            <p>if <span class="code">rethrow</span> is false - the exception will not be rethrown after handling it. The default is <span class="code">false</span>.</p>
                            <p>
                                Only a single error handler can be registered. Trying to register more than one
                                handler will throw a <span class="code">MoreThanOneErrorHandlerException</span>.
                            </p>
                        </div>
                        <div class="attribute_samples">
                            <h3>Example:</h3>
                            <pre class="brush: csharp, highlight: [5,6,7,8,9,10]">
                                static void Main(string[] args)
                                {
                                    var p = new Parser&lt;TheApp>();

                                    p.RegisterErrorHandler(ex =>
                                    {
                                        Console.ForegroundColor = ConsoleColor.Red;
                                        Console.WriteLine(ex.Message);
                                        Console.ResetColor();
                                    });

                                    p.Run(args);
                                }
                            </pre>
                            <p>This will print the error message in red.</p>
                        </div>
                    </div>
                    <div class="attribute" id="expressions_global">
                        <div class="attribute_name code">RegisterParameterHandler(string names, Action action, [string description])</div>
                        <div class="attribute_name code">RegisterParameterHandler&lt;T>(string names, Action&lt;T> action, [string description])</div>
                        <div class="attribute_description">
                            <p>Registers a parameter handler.</p>
                            <p>
                                A parameter handler can be either an action that accepts no arguments
                                or an action that accepts one of the support argument types.
                            </p>
                            <p>If the action accept no arguments (<span class="code">Action</span>) it is treated as a boolean switch.</p>
                            <p>If the action accpets one parameter of the supported types, the value of the argument is passed to the handler.</p>
                            <p><em>See the <span class="code">Parameter</span> attribute section for a list of supported types.</em></p>
                            <p>The <span class="code">description</span> parameter is used to generate the help string.</p>
                        </div>
                        <div class="attribute_samples">
                            <h3>Example:</h3>
                            <pre class="brush: csharp, highlight: [5,6,7,8]">
                                static void Main(string[] args)
                                {
                                    var p = new Parser&lt;TheApp>();

                                    p.RegisterParameterHandler("d,debug", () => Debugger.Launch());
                                    p.RegisterParameterHandler&lt;int>(
                                        "p,pause",
                                        seconds => Thread.Sleep(1000 * seconds));

                                    p.Run(args);
                                }
                            </pre>
                            <p>This will launch the debugger when the user enters either <span class="code highlight">-d</span> or <span class="code highlight">-debug</span>.</p>
                            <p>
                                In-addition, when using <span class="code highlight">-p</span> or <span class="code highlight">-pause</span>,
                                the execution will pause for the specified seconds, for example: <span class="code highlight">-p:5</span>.
                            </p>
                            <p>
                                Arguments are handled in the input order.<br />
                                For example, entering <span class="code highlight">-d -p:5</span> will first trigger the debugger and will then pause.<br />
                                Entering <span class="code highlight">-p:5 -d</span> will first pause and then trigger the debugger.
                            </p>
                        </div>
                    </div>
                </div>
                <div id="examples" class="content">
                    <h2>Examples</h2>
                    <div class="attribute">
                        <h4>A useful base class for all console applications:</h4>
                        <pre class="brush: csharp">
                            class ConsoleBase
                            {
                                [Error]
                                public static void Error(Exception ex)
                                {
                                    Console.ForegroundColor = ConsoleColor.Red;
                                    Console.WriteLine(ex.Message);
                                    Console.ResetColor();
                                }

                                [Empty]
                                [Help(Aliases = "h,?")]
                                public static void Help(string help)
                                {
                                    Console.WriteLine(help);
                                }

                                [Global]
                                public static void Debug()
                                {
                                    Debugger.Launch();
                                }
                            }
                        </pre>
                        <p>Deriving from that class gives you:</p>
                        <ul>
                            <li>Errors will be handled and printed in red</li>
                            <li>
                                Either <span class="code highlight">-h</span>, <span class="code highlight">-?</span>,
                                <span class="code highlight">-help</span> or an empty input will print the genareted help
                            </li>
                            <li><span class="code highlight">-debug</span> will launch the debugger</li>
                        </ul>
                    </div>
                    <div class="attribute">
                        <h4>A class with some verbs and validation:</h4>
                        <pre class="brush: csharp">
                            class TheApp : BaseApp
                            {
                                [Verb(IsDefault = true, Description = "Prints 'Hello' and a name")]
                                public static void Hello(
                                    
                                    [Parameter(Aliases = "n", Required = true, Description = "The name")]
                                    string name,
                                    
                                    [LessOrEqualTo(30)]
                                    [Parameter(Aliases = "c", Default = 10, 
                                               Description = "The number of lines to print")]
                                    int count)
                                {
                                    for (int i = 0; i < count; i++)
                                    {
                                        Console.WriteLine("Hello {0}", name);
                                    }
                                }

                                [Verb]
                                public static void Count(
                                    [LessOrEqualTo(50), MoreOrEqualTo(0)] int start,
                                    [LessOrEqualTo(100), MoreThan(50)] int end,
                                    [Parameter(Aliases = "p,pause", Default = 1.5)] double pauseSeconds,
                                    [Parameter(Aliases = "align")] Alignment alignment)
                                {
                                    var sign = alignment == Alignment.Left ? "-" : "";

                                    var format = "{0," + sign + "5}";

                                    for (int i = start; i <= end; i++)
                                    {
                                        Console.WriteLine(format, i);

                                        Thread.Sleep((int)(pauseSeconds * 1000));
                                    }
                                }

                                public enum Alignment
                                {
                                    Right,
                                    Left,
                                }
                            }
                        </pre>
                        <p>The first verb, <span class="code">Hello</span> is the default verb and it has two parameters:</p>
                        <ol>
                            <li><span class="code highlight">name</span>: Required and has an alias "n".</li>
                            <li>
                                <span class="code highlight">count</span>: Has a default of 10 and an alias "c".
                                The value has to be less or equal to 30 to be valid.
                            </li>
                        </ol>
                        <p>
                            The second verb, <span class="code">Count</span> prints a list of numbers 
                            with left or right alignment and a pause between each line. The verb has four parameters:</p>
                        <ol>
                            <li><span class="code highlight">start</span>: The value has to be between 0 and 50.</li>
                            <li><span class="code highlight">end</span>: The value has to between 50 and 100.</li>
                            <li><span class="code highlight">pauseSeconds</span>: Default of 1.5 and aliases: "p" and "pause".</li>
                            <li><span class="code highlight">alignment</span>: An enum with an alias "align".</li>
                        </ol>
                        <p>Sample run:</p>
                        <pre class="console">
<span class="commandline">> myexe hello -n:CLAP -c:5</span>
Hello CLAP
Hello CLAP
Hello CLAP
Hello CLAP
Hello CLAP</pre>
                        <pre class="console">
<span class="commandline">> myexe count -start:1 -end:55 -p:0.1 -align:Left</span>
1
2
3
4
...
55</pre>
                        <pre class="console">
<span class="commandline">> myexe count -start:10 -end:55 -p:0.1 -align:Right</span>
    10
    11
    12
    13
    ...
    55</pre>
                        <p>
                            Notice that all names, including the verbs and parameters,
                            are <b>case-insensitive</b> but enum values are <b>case-sensitive</b>.
                        </p>
                    </div>
                </div>
                <div id="download" class="content">
                    <h3>Get it</h3>
                    <p>get it</p>
                </div>
                <div id="about" class="content">
                    <h3>About</h3>
                    <p>CLAP: A free and open-source project by Adrian Aisemberg (<a href="mailto:adrianaisemberg@gmail.com">adrianaisemberg@gmail.com</a>).</p>
                    <p>More by Adrian:</p>
                    <ul>
                        <li><a href="http://www.vercue.com">vercue.com</a>: A kick-ass svn client for Windows</li>
                        <li><a href="http://www.sharpregion.com">sharpregion.com</a>: A kick-ass blog about vercue</li>
                    </ul>
                </div>
                <div id="license" class="content">
                    <h3>License</h3>
                    <p>MIT License</p>
                    <p>Copyright (c) 2011 Adrian Aisemberg, SharpRegion</p>
                    <p>
                        Permission is hereby granted, free of charge, to any person obtaining a copy of this software
                        and associated documentation files (the "Software"), to deal in the Software without restriction,
                        including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense,
                        and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so,
                        subject to the following conditions:
                    </p>
                    <p>
                        The above copyright notice and this permission notice shall be included in all copies or substantial
                        portions of the Software.
                    </p>
                    <p>
                        THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED,
                        INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE
                        AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
                        DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
                        OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.                    
                    </p>
                </div>
            </div>
        </div>
    </div>
    <div id="footer">
        <a href="http://www.sharpregion.com">SharpRegion</a>
        <span class="color">&#9679;</span>
        <a href="http://www.vercue.com">Vercue</a>
        <span class="color">&#9679;</span>
        By <a href="mailto:adrianaisemberg@gmail.com">Adrian Aisemberg</a>
    </div>
</body>
</html>